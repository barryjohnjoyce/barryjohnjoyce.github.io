<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Our Music</title>
    <link href="../bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="../style.css" rel="stylesheet">

</head>

<body>

<!-- Navigation -->
<nav class="navbar-inverse nav">

    <a class="navbar-brand" href="../index.html">Union City</a>
    <div>
        <button type="button" class="navbar-toggle"
                data-toggle="collapse"
                data-target="#myCollapsingList">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>

        <ul id="myCollapsingList" class="nav navbar-nav navbar-right collapse navbar-collapse">

            <li><a href="../pages/meettheband.html">Meet The Band</a></li>
            <li><a href="../pages/ourmusic.html">Our Music</a></li>
            <li><a href="../pages/availability.html">Check Availability</a></li>
            <li><a href="../pages/contactus.html">Contact Us</a></li>

            <a href="https://www.facebook.com"><img src="../static/images/fb.png" alt="fb.png" class="smedia"></a>

            <a href="https://www.twitter.com"><img src="../static/images/twitter.png" alt="twitter.png" class="smedia"></a>

            <a href="https://www.youtube.com"><img src="../static/images/youtube.png" alt="youtube.png" class="smedia"></a>
        </ul>
    </div>
</nav>

<div class="container">
    <img src="../static/images/band2.jpg" alt="Band Pic" id="bandpic"/>
    <h1>Our Music</h1>

    <p> Lorem ipsum dolor sit amet, consectetur adipisicing elit. Soluta ea, doloremque nihil voluptatum ullam commodi
        excepturi fugiat accusantium debitis distinctio quae enim quod modi consectetur quidem. Tempora atque ipsam
        accusantium?
    <p>

</div>

<hr/>

<div class='container'>

    <div class='row'>

        <div class='col-sm-6'>
            <h2>Audio Clips</h2>

            <h4> Clarksville </h4>
            <a href="https://itunes.apple.com/us/album/the-best-of-the-monkees/id4512505">
                <img src="../static/images/itunes.jpg" alt="Itunes Logo" class="ituneslogo"/></a>
            <audio controls="controls">
                <source src="../static/videos/Clarksville.mp3" type="audio/mpeg; codecs=mp3"/>
                <source src="../static/videos/Clarksville.ogg" type="audio/ogg; codecs=vorbis"/>
            </audio>

            <h4> Daydream Believer </h4>
            <a href="https://itunes.apple.com/us/album/the-best-of-the-monkees/id4512505">
                <img src="../static/images/itunes.jpg" alt="Itunes Logo" class="ituneslogo"/></a>
            <audio controls="controls">
                <source src="../static/videos/DaydreamBeliever.mp3" type="audio/mpeg; codecs=mp3"/>
                <source src="../static/videos/DaydreamBeliever.ogg" type="audio/ogg; codecs=vorbis"/>
            </audio>

            <h4> Stepping Stone </h4>
            <a href="https://itunes.apple.com/us/album/the-best-of-the-monkees/id4512505">
                <img src="../static/images/itunes.jpg" alt="Itunes Logo" class="ituneslogo"/></a>
            <audio controls="controls">
                <source src="../static/videos/SteppingStone.mp3" type="audio/mpeg; codecs=mp3"/>
                <source src="../static/videos/SteppingStone.ogg" type="audio/ogg; codecs=vorbis"/>
            </audio>

            <h4> I'm A Believer </h4>
            <a href="https://itunes.apple.com/us/album/the-best-of-the-monkees/id4512505">
                <img src="../static/images/itunes.jpg" alt="Itunes Logo" class="ituneslogo"/></a>
            <audio controls="controls">
                <source src="../static/videos/ImABeliever.mp3" type="audio/mpeg; codecs=mp3"/>
                <source src="../static/videos/ImABeliever.ogg" type="audio/ogg; codecs=vorbis"/>
            </audio>

        </div>

        <div class='col-sm-6'>
            <h2 id="h2search">Search Our Catalogue through iTunes!</h2>

            <form action="#" id="search-artist">
                <fieldset>

                    <div>
                        <label for="artist-query">Input our name below and click "Search"</label>
                        <input class="inputWidth" type="text" id="artist-query">
                        <input type="submit" value="Search!">
                    </div>

                </fieldset>
            </form>

            <form action="#" id="select-artist">
                <fieldset>
                    <div>
                        <label for="artists">Select us from the dropdown menu</label>
                        <div>
                            <select class="inputWidth" id="artists"></select>
                        </div>
                    </div>
                </fieldset>
            </form>

            <form action="#" id="select-album">
                <fieldset>
                    <div>
                        <label for="albums">Select an album</label>
                        <div>
                            <select class="inputWidth" id="albums"></select>
                        </div>
                    </div>
                </fieldset>
            </form>

            <form action="#" id="select-track">
                <fieldset>
                    <legend></legend>
                    <div>
                        <ul></ul>
                    </div>
                </fieldset>
            </form>


        </div><!--Closes div class col-sm-7-->
    </div><!-- Closes Div row-->
    <hr/>

    <h2><a href="availability.html"> Click Here To Book Our Band!</a></h2>
    <hr/>
</div> <!--Closes Container div-->

<footer class="col-12">

    <p>Copyright &copy; Barry Joyce/Code Institute 2016</p>

</footer>


<script src="https://code.jquery.com/jquery-2.0.3.min.js"></script>

<script src='https://code.jquery.com/jquery.min.js'></script>
<script src='../bootstrap/js/bootstrap.min.js'></script>

<script><!--ITunes API query and search-->

$("#search-artist input[type='submit']").on('click', function (event) {

    event.preventDefault();
    var nameArtist = $("#search-artist #artist-query").val();
    var urlArtistSpotify = "https://api.spotify.com/v1/search?type=artist&query=" + nameArtist;

    $.ajax({
        url: urlArtistSpotify,
        dataType: 'json',
    })
            .success(function (artistsData) {
                var contentSelect = "<option disabled selected>Select artist</option>";

                $.each(artistsData.artists.items, function (i, elem) {
                    contentSelect += '<option value="' + elem.id + '">' + elem.name + '</option>';
                });
                $("#select-artist select").html(contentSelect);

            })

});


$("#select-artist select").on('change', function (e) {
    e.preventDefault();
    var idArtist = $(this).val();
    var urlAlbums = "https://api.spotify.com/v1/artists/" + idArtist + "/albums"

    $.ajax({
        url: urlAlbums,
        dataType: 'json'
    })
            .success(function (dataAlbums) {

                console.log(dataAlbums);
                var contentSelect = "<option disabled selected>Select album</option>";

                $.each(dataAlbums.items, function (i, elem) {
                    contentSelect += '<option value="' + elem.id + '">' + elem.name + '</option>';
                });
                $("#select-album select").html(contentSelect);

            })

})

$("#select-album select").on('change', function (event) {
    event.preventDefault();

    var idAlbum = $(this).val();
    var urlTracks = "https://api.spotify.com/v1/albums/" + idAlbum + "/tracks"

    $.ajax({
        url: urlTracks,
        dataType: 'json'
    })
            .success(function (dataTracks) {

                console.log(dataTracks);

                var contentUl = "<h3>Click on a track to hear a preview!</h3></br>";

                $.each(dataTracks.items, function (i, elem) {
                    contentUl += '<li><a target="_blank" href="' + elem.preview_url + '">' + elem.name + '</a></li>';
                });

                $("#select-track ul").html(contentUl);

            })

});


</script>

</body>

</html>